{"version":3,"file":"actions.min.js","sources":["../../../src/local/content/actions.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Collapsed Topics Course state actions dispatcher.\r\n *\r\n * @module     format_topcoll/local/content/actions\r\n * @class      format_topcoll/local/content/actions\r\n * @copyright  2024 G J Barnard based upon work done by:\r\n * @copyright  2021 Ferran Recio <ferran@moodle.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport BaseActions from 'core_courseformat/local/content/actions';\r\n\r\nimport Log from 'core/log';\r\n\r\nexport default class extends BaseActions {\r\n\r\n    /**\r\n     * Constructor hook.\r\n     */\r\n    create() {\r\n        super.create();\r\n        //this.selectors.ADDSECTION = \".increase-sections\";\r\n    }\r\n\r\n    /**\r\n     * Check the section list and disable some options if needed.\r\n     *\r\n     * @param {Object} detail the update details.\r\n     * @param {Object} detail.state the state object.\r\n     */\r\n    _checkSectionlist({state}) {\r\n        Log.debug('_checkSectionlist state.course.sectionlist ' + state.course.sectionlist);\r\n        Log.debug('_checkSectionlist state.course.numsectionswithoutdeligated ' + state.course.numsectionswithoutdeligated);\r\n        // Disable \"add section\" actions if the course max sections has been exceeded.\r\n        //this._setAddSectionLocked(state.course.sectionlist.length > state.course.maxsections);\r\n        this._setAddSectionLocked(state.course.numsectionswithoutdeligated >= state.course.maxsectionswithoutdeligated);\r\n    }\r\n\r\n    /**\r\n     * Disable all add sections actions.\r\n     *\r\n     * @param {boolean} locked the new locked value.\r\n     */\r\n    _setAddSectionLocked(locked) {\r\n        const courseAddSection = this.getElement(this.selectors.COURSEADDSECTION);\r\n        if (courseAddSection) {\r\n            const addSection = courseAddSection.querySelector(this.selectors.ADDSECTION);\r\n            Log.debug('_setAddSectionLocked addSection ' + addSection.classList);\r\n            if (addSection) {\r\n                addSection.classList.toggle(this.classes.DISPLAYNONE, locked);\r\n            }\r\n            const noMoreSections = courseAddSection.querySelector(this.selectors.MAXSECTIONSWARNING);\r\n            noMoreSections.classList.toggle(this.classes.DISPLAYNONE, !locked);\r\n        }\r\n    }\r\n}\r\n"],"names":["BaseActions","create","_checkSectionlist","state","debug","course","sectionlist","numsectionswithoutdeligated","_setAddSectionLocked","maxsectionswithoutdeligated","locked","courseAddSection","this","getElement","selectors","COURSEADDSECTION","addSection","querySelector","ADDSECTION","classList","toggle","classes","DISPLAYNONE","MAXSECTIONSWARNING"],"mappings":";;;;;;;;;wLA6B6BA,iBAKzBC,eACUA,SAUVC,4BAAkBC,MAACA,yBACXC,MAAM,8CAAgDD,MAAME,OAAOC,0BACnEF,MAAM,8DAAgED,MAAME,OAAOE,kCAGlFC,qBAAqBL,MAAME,OAAOE,6BAA+BJ,MAAME,OAAOI,6BAQvFD,qBAAqBE,cACXC,iBAAmBC,KAAKC,WAAWD,KAAKE,UAAUC,qBACpDJ,iBAAkB,OACZK,WAAaL,iBAAiBM,cAAcL,KAAKE,UAAUI,yBAC7Dd,MAAM,mCAAqCY,WAAWG,WACtDH,YACAA,WAAWG,UAAUC,OAAOR,KAAKS,QAAQC,YAAaZ,QAEnCC,iBAAiBM,cAAcL,KAAKE,UAAUS,oBACtDJ,UAAUC,OAAOR,KAAKS,QAAQC,aAAcZ"}